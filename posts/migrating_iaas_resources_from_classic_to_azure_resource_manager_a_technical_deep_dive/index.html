<!doctype html>
<html lang="en-us">
  <head>
    <title>Migrating IaaS Resources from Classic to Azure Resource Manager- A Technical Deep Dive // mangoldai :: cloud architect insights :: Joshua Mangold</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.92.2" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="John Doe" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/mangoldaiwiki/css/main.min.d18c46a9c052e3fff4ff60ea22fff43c74140b8b952b4bbebd229127fbf997f3.css" />
    

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Migrating IaaS Resources from Classic to Azure Resource Manager- A Technical Deep Dive"/>
<meta name="twitter:description" content="Migrating IaaS Resources from Classic to Azure Resource Manager: A Technical Deep Dive As the Azure platform continues to evolve, the migration from the classic deployment model to the Azure Resource Manager deployment model has become an important part of managing your cloud infrastructure. This comprehensive guide will take you on a deep dive into the technical aspects of this migration process, helping you understand how the Azure platform translates resources between the two deployment models."/>

    <meta property="og:title" content="Migrating IaaS Resources from Classic to Azure Resource Manager- A Technical Deep Dive" />
<meta property="og:description" content="Migrating IaaS Resources from Classic to Azure Resource Manager: A Technical Deep Dive As the Azure platform continues to evolve, the migration from the classic deployment model to the Azure Resource Manager deployment model has become an important part of managing your cloud infrastructure. This comprehensive guide will take you on a deep dive into the technical aspects of this migration process, helping you understand how the Azure platform translates resources between the two deployment models." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jmangold23.github.io/mangoldaiwiki/posts/migrating_iaas_resources_from_classic_to_azure_resource_manager_a_technical_deep_dive/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-29T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-08-29T00:00:00+00:00" />



  </head>
  <body>
    <header class="app-header">
      <a href="https://jmangold23.github.io/mangoldaiwiki/"><img class="app-header-avatar" src="/mangoldaiwiki/avatar.jpg" alt="John Doe" /></a>
      <span class="app-header-title">mangoldai :: cloud architect insights :: Joshua Mangold</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/mangoldaiwiki/">Home</a>
             - 
          
          <a class="app-header-menu-item" href="/mangoldaiwiki/tags/">Tags</a>
      </nav>
      <p>Cloud architecture, Azure, and tech innovations. Notes, tips, and insights.</p>
      <div class="app-header-social">
        
          <a href="https://github.com/jmangold23" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>My Github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg>
          </a>
        
          <a href="https://www.linkedin.com/in/joshua-mangold-a7ba0989/" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-linkedin">
  <title>My LinkedIn</title>
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>
</svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Migrating IaaS Resources from Classic to Azure Resource Manager- A Technical Deep Dive</h1>
      <div class="post-meta">
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Aug 29, 2023
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          5 min read
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>
</svg>
              <a class="tag" href="https://jmangold23.github.io/mangoldaiwiki/tags/migration/">Migration</a>
              <a class="tag" href="https://jmangold23.github.io/mangoldaiwiki/tags/iaas/">IaaS</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <h2 id="migrating-iaas-resources-from-classic-to-azure-resource-manager-a-technical-deep-dive">Migrating IaaS Resources from Classic to Azure Resource Manager: A Technical Deep Dive</h2>
<p>As the Azure platform continues to evolve, the migration from the classic deployment model to the Azure Resource Manager deployment model has become an important part of managing your cloud infrastructure. This comprehensive guide will take you on a deep dive into the technical aspects of this migration process, helping you understand how the Azure platform translates resources between the two deployment models.</p>
<h3 id="understanding-the-difference-between-data-plane-and-management-plane">Understanding the Difference Between Data Plane and Management Plane</h3>
<p>Before we dive into the migration process, it&rsquo;s crucial to understand the distinction between the data plane and the management plane when working with infrastructure as a service (IaaS) resources.</p>
<p>The <em>management/control plane</em> refers to the calls that come into the management/control plane or the API for modifying resources, such as creating a VM, restarting a VM, or updating a virtual network. These operations manage the running resources but do not directly affect connecting to the VMs.</p>
<p>The <em>data plane</em> (application) describes the runtime of the application itself, involving interaction with instances that don&rsquo;t go through the Azure API. Examples include accessing your website, pulling data from a running SQL Server instance, or using Remote Desktop Protocol (RDP) or Secure Shell (SSH) to connect to a virtual machine. These operations keep the application running across compute, networking, and storage.</p>
<p>The data plane remains the same between the classic deployment model and the Azure Resource Manager stack. The difference lies in the representation of the resources, which the Azure platform translates during the migration process. As a result, you&rsquo;ll need to use new tools, APIs, and SDKs to manage your resources in the Resource Manager stack.</p>
<h3 id="the-migration-workflow">The Migration Workflow</h3>
<p>The migration process from the classic deployment model to the Azure Resource Manager deployment model involves several key steps:</p>
<ol>
<li><strong>Validate</strong>: The validate operation analyzes the state of the resources you want to migrate in the classic deployment model, evaluating whether they are capable of migration.</li>
<li><strong>Prepare</strong>: The prepare operation simulates the transformation of the IaaS resources from the classic deployment model to the Resource Manager resources, allowing you to visualize the changes.</li>
<li><strong>Check</strong>: In this optional step, you can use the configuration you downloaded earlier or manually check the properties and resources to validate that the metadata migration looks correct.</li>
<li><strong>Abort</strong>: If you encounter any issues during the migration process, you can abort the migration and revert the changes to the classic deployment model.</li>
<li><strong>Commit</strong>: After you&rsquo;ve completed the validation, you can commit the migration, and the resources will no longer be available in the classic deployment model, only in the Resource Manager deployment model.</li>
</ol>
<p>Throughout the migration process, it&rsquo;s important to note that the operations are idempotent, meaning you can retry the prepare, abort, or commit operation if you encounter any problems, and the Azure platform will try the action again.</p>
<h3 id="resource-mappings-from-classic-to-resource-manager">Resource Mappings from Classic to Resource Manager</h3>
<p>The Azure platform translates the representation of resources from the classic deployment model to the Azure Resource Manager deployment model. Here&rsquo;s a table that outlines the mappings between the two:</p>
<table>
<thead>
<tr>
<th>Classic Representation</th>
<th>Resource Manager Representation</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cloud service name (Hosted Service Name)</td>
<td>DNS name</td>
<td>During migration, a new resource group is created for every cloud service with the naming pattern <code>&lt;cloudservicename&gt;-migrated</code>.</td>
</tr>
<tr>
<td>Virtual machine</td>
<td>Virtual machine</td>
<td>VM-specific properties are migrated unchanged.</td>
</tr>
<tr>
<td>Disk resources attached to VM</td>
<td>Implicit disks attached to VM</td>
<td>Disks are not modeled as top-level resources in the Resource Manager deployment model.</td>
</tr>
<tr>
<td>VM extensions</td>
<td>VM extensions</td>
<td>All the resource extensions, except XML extensions, are migrated.</td>
</tr>
<tr>
<td>Virtual machine certificates</td>
<td>Certificates in Azure Key Vault</td>
<td>The migration creates a new Azure key vault per cloud service and moves the certificates into the key vault.</td>
</tr>
<tr>
<td>Availability-set property</td>
<td>Availability-set resource</td>
<td>Availability sets become a top-level resource as part of the migration.</td>
</tr>
<tr>
<td>Network configuration on a VM</td>
<td>Primary network interface</td>
<td>Network configuration on a VM is represented as the primary network interface resource.</td>
</tr>
<tr>
<td>Load-balanced endpoint set</td>
<td>Load balancer</td>
<td>The platform assigns a new load-balancer resource, and the load-balancing endpoint set becomes load-balancer rules.</td>
</tr>
<tr>
<td>VIP address</td>
<td>Public IP address with DNS name</td>
<td>The virtual IP address becomes a public IP address associated with the load balancer.</td>
</tr>
<tr>
<td>Virtual network</td>
<td>Virtual network</td>
<td>The virtual network is migrated, with all its properties, to the Resource Manager deployment model.</td>
</tr>
</tbody>
</table>
<p>This table provides a comprehensive overview of how the classic deployment model resources are translated into their Resource Manager counterparts, helping you understand the changes and plan accordingly.</p>
<h3 id="updating-your-automation-and-tooling">Updating Your Automation and Tooling</h3>
<p>As part of the migration process, you&rsquo;ll need to update your existing automation or tooling to ensure that it continues to work after the migration. The representation of the resources has changed, and you&rsquo;ll need to use the new tools, APIs, and SDKs provided by the Azure Resource Manager deployment model.</p>
<h3 id="conclusion">Conclusion</h3>
<p>Migrating your IaaS resources from the classic deployment model to the Azure Resource Manager deployment model is a crucial step in optimizing your cloud infrastructure. By understanding the technical details of this migration process, you can plan and execute the migration with confidence, taking advantage of the improved performance, security, and new features offered by the Azure Resource Manager.</p>
<p>For more information and additional resources, please refer to the following links:</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/virtual-machines/migration-classic-resource-manager-overview">Overview of platform-supported migration of IaaS resources from classic to Azure Resource Manager</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/virtual-machines/migration-classic-resource-manager-plan">Planning for migration of IaaS resources from classic to Azure Resource Manager</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/virtual-machines/migration-classic-resource-manager-ps">Use PowerShell to migrate IaaS resources from classic to Azure Resource Manager</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/virtual-machines/migration-classic-resource-manager-cli">Use CLI to migrate IaaS resources from classic to Azure Resource Manager</a></li>
</ul>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
