<!doctype html>
<html lang="en-us">
  <head>
    <title>Build PowerShell on macOS- A Comprehensive Guide // Cloud architect insights :: Joshua Mangold</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.92.2" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="John Doe" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/css/main.min.d18c46a9c052e3fff4ff60ea22fff43c74140b8b952b4bbebd229127fbf997f3.css" />
    

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Build PowerShell on macOS- A Comprehensive Guide"/>
<meta name="twitter:description" content="Building PowerShell on macOS can be a straightforward process, but it&rsquo;s important to follow the right steps and address any potential issues that may arise. This guide will walk you through the process of setting up your development environment, installing the necessary dependencies, and building PowerShell using the provided build module.
Environment Setup To get started, you&rsquo;ll need to have either Homebrew or MacPorts installed on your macOS machine. These package managers will help you install the required dependencies for building PowerShell."/>

    <meta property="og:title" content="Build PowerShell on macOS- A Comprehensive Guide" />
<meta property="og:description" content="Building PowerShell on macOS can be a straightforward process, but it&rsquo;s important to follow the right steps and address any potential issues that may arise. This guide will walk you through the process of setting up your development environment, installing the necessary dependencies, and building PowerShell using the provided build module.
Environment Setup To get started, you&rsquo;ll need to have either Homebrew or MacPorts installed on your macOS machine. These package managers will help you install the required dependencies for building PowerShell." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mangoldai.com/posts/build_powershell_on_macos_a_comprehensive_guide/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-05-15T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-05-15T00:00:00+00:00" />



  </head>
  <body>
    <header class="app-header">
      <a href="https://mangoldai.com/"><img class="app-header-avatar" src="/avatar.jpg" alt="John Doe" /></a>
      <span class="app-header-title">Cloud architect insights :: Joshua Mangold</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/">Home</a>
             - 
          
          <a class="app-header-menu-item" href="/tags/">Tags</a>
      </nav>
      <p>Cloud architecture, Azure, and tech innovations. Notes, tips, and insights.</p>
      <div class="app-header-social">
        
          <a href="https://github.com/jmangold23" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>My Github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg>
          </a>
        
          <a href="https://www.linkedin.com/in/joshua-mangold-a7ba0989/" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-linkedin">
  <title>My LinkedIn</title>
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>
</svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Build PowerShell on macOS- A Comprehensive Guide</h1>
      <div class="post-meta">
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          May 15, 2024
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          2 min read
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>
</svg>
              <a class="tag" href="https://mangoldai.com/tags/powershell/">PowerShell</a>
              <a class="tag" href="https://mangoldai.com/tags/macos/">macOS</a>
              <a class="tag" href="https://mangoldai.com/tags/build/">Build</a>
              <a class="tag" href="https://mangoldai.com/tags/development/">Development</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <p>Building PowerShell on macOS can be a straightforward process, but it&rsquo;s important to follow the right steps and address any potential issues that may arise. This guide will walk you through the process of setting up your development environment, installing the necessary dependencies, and building PowerShell using the provided build module.</p>
<h2 id="environment-setup">Environment Setup</h2>
<p>To get started, you&rsquo;ll need to have either <a href="https://brew.sh/">Homebrew</a> or <a href="https://www.macports.org/">MacPorts</a> installed on your macOS machine. These package managers will help you install the required dependencies for building PowerShell.</p>
<p>Once you have a package manager installed, follow the same instructions as the <a href="https://github.com/PowerShell/PowerShell/blob/master/docs/building/linux.md">Linux build instructions</a> to download and install a self-hosted copy of PowerShell on your macOS machine. From the <code>pwsh.exe</code> prompt, run <code>Import-Module ./build.psm1</code> and use the <code>Start-PSBootstrap</code> function to install the necessary dependencies.</p>
<p>The <code>Start-PSBootstrap</code> function performs the following tasks:</p>
<ol>
<li>Uses <code>brew</code> or <code>port</code> to install OpenSSL and GNU WGet.</li>
<li>Uninstalls any prior versions of the .NET CLI.</li>
<li>Downloads and installs the .NET Core SDK to <code>~/.dotnet</code>.</li>
</ol>
<p>If you want to use the <code>dotnet</code> command outside of the <code>Start-PSBuild</code> context, make sure to add <code>~/.dotnet</code> to your <code>PATH</code> environment variable.</p>
<h3 id="addressing-the-too-many-open-files-error">Addressing the &lsquo;Too Many Open Files&rsquo; Error</h3>
<p>One potential issue you may encounter during the build process is the &lsquo;Too Many Open Files&rsquo; error. This is due to a <a href="https://github.com/dotnet/cli/issues/809">bug in NuGet</a>, which can cause the <code>dotnet restore</code> command to fail.</p>
<p>To fix this issue, you can run <code>ulimit -n 2048</code> in your session to increase the number of open files allowed. To make this change permanent, add the <code>ulimit -n 2048</code> command to your shell&rsquo;s profile (e.g., <code>.bashrc</code> or <code>.zshrc</code>).</p>
<p>Unfortunately, the build module cannot perform this fix for you due to <a href="https://github.com/PowerShell/PowerShell/issues/847">issue #847</a>, so you&rsquo;ll need to handle this manually.</p>
<h2 id="building-powershell-using-the-module">Building PowerShell Using the Module</h2>
<p>Once you&rsquo;ve set up your environment and addressed any potential issues, you can start building PowerShell using the provided build module. Open a PowerShell session by running <code>pwsh</code> and then use the <code>Start-PSBuild</code> command from the module.</p>
<p>After the build process is complete, you&rsquo;ll find the built PowerShell binary at <code>./src/powershell-unix/bin/Debug/net6.0/osx-x64/publish/pwsh</code>.</p>
<p>Building PowerShell on macOS may require a bit of setup, but with the right steps and a little troubleshooting, you can successfully build the PowerShell runtime on your macOS machine. If you encounter any issues not covered in this guide, be sure to refer to the <a href="https://github.com/PowerShell/PowerShell">PowerShell GitHub repository</a> for the latest information and support.</p>
<p>Source: <a href="https://raw.githubusercontent.com/PowerShell/PowerShell/master/docs/building/macos.md">PowerShell GitHub Repository - Building PowerShell on macOS</a></p>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
