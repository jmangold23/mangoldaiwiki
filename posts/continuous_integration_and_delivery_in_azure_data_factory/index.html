<!doctype html>
<html lang="en-us">
  <head>
    <title>Continuous Integration and Delivery in Azure Data Factory // mangoldai :: cloud architect insights :: Joshua Mangold</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.92.2" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="John Doe" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/mangoldaiwiki/css/main.min.d18c46a9c052e3fff4ff60ea22fff43c74140b8b952b4bbebd229127fbf997f3.css" />
    

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Continuous Integration and Delivery in Azure Data Factory"/>
<meta name="twitter:description" content="Continuous integration is the practice of testing each change made to your codebase automatically and as early as possible. Continuous delivery follows the testing that happens during continuous integration and pushes changes to a staging or production system.
In Azure Data Factory, continuous integration and delivery (CI/CD) means moving Data Factory pipelines from one environment (development, test, production) to another. Azure Data Factory utilizes Azure Resource Manager templates to store the configuration of your various ADF entities (pipelines, datasets, data flows, and so on)."/>

    <meta property="og:title" content="Continuous Integration and Delivery in Azure Data Factory" />
<meta property="og:description" content="Continuous integration is the practice of testing each change made to your codebase automatically and as early as possible. Continuous delivery follows the testing that happens during continuous integration and pushes changes to a staging or production system.
In Azure Data Factory, continuous integration and delivery (CI/CD) means moving Data Factory pipelines from one environment (development, test, production) to another. Azure Data Factory utilizes Azure Resource Manager templates to store the configuration of your various ADF entities (pipelines, datasets, data flows, and so on)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jmangold23.github.io/mangoldaiwiki/posts/continuous_integration_and_delivery_in_azure_data_factory/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-27T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-11-27T00:00:00+00:00" />



  </head>
  <body>
    <header class="app-header">
      <a href="https://jmangold23.github.io/mangoldaiwiki/"><img class="app-header-avatar" src="/mangoldaiwiki/avatar.jpg" alt="John Doe" /></a>
      <span class="app-header-title">mangoldai :: cloud architect insights :: Joshua Mangold</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/mangoldaiwiki/">Home</a>
             - 
          
          <a class="app-header-menu-item" href="/mangoldaiwiki/tags/">Tags</a>
      </nav>
      <p>Cloud architecture, Azure, and tech innovations. Notes, tips, and insights.</p>
      <div class="app-header-social">
        
          <a href="https://github.com/jmangold23" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>My Github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg>
          </a>
        
          <a href="https://www.linkedin.com/in/joshua-mangold-a7ba0989/" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-linkedin">
  <title>My LinkedIn</title>
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>
</svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Continuous Integration and Delivery in Azure Data Factory</h1>
      <div class="post-meta">
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Nov 27, 2023
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          5 min read
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>
</svg>
              <a class="tag" href="https://jmangold23.github.io/mangoldaiwiki/tags/adf/">ADF</a>
              <a class="tag" href="https://jmangold23.github.io/mangoldaiwiki/tags/ci/cd/">CI/CD</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <p>Continuous integration is the practice of testing each change made to your codebase automatically and as early as possible. Continuous delivery follows the testing that happens during continuous integration and pushes changes to a staging or production system.</p>
<p>In Azure Data Factory, continuous integration and delivery (CI/CD) means moving Data Factory pipelines from one environment (development, test, production) to another. Azure Data Factory utilizes <a href="https://docs.microsoft.com/azure/azure-resource-manager/templates/overview">Azure Resource Manager templates</a> to store the configuration of your various ADF entities (pipelines, datasets, data flows, and so on). There are two suggested methods to promote a data factory to another environment:</p>
<ul>
<li>Automated deployment using Data Factory&rsquo;s integration with <a href="https://docs.microsoft.com/azure/devops/pipelines/get-started/what-is-azure-pipelines">Azure Pipelines</a></li>
<li>Manually upload a Resource Manager template using Data Factory UX integration with Azure Resource Manager.</li>
</ul>
<h2 id="cicd-lifecycle">CI/CD Lifecycle</h2>
<p>Below is a sample overview of the CI/CD lifecycle in an Azure data factory that&rsquo;s configured with Azure Repos Git. For more information on how to configure a Git repository, see <a href="https://docs.microsoft.com/azure/data-factory/source-control">Source control in Azure Data Factory</a>.</p>
<ol>
<li>A development data factory is created and configured with Azure Repos Git. All developers should have permission to author Data Factory resources like pipelines and datasets.</li>
<li>A developer <a href="https://docs.microsoft.com/azure/data-factory/source-control#creating-feature-branches">creates a feature branch</a> to make a change. They debug their pipeline runs with their most recent changes. For more information on how to debug a pipeline run, see <a href="https://docs.microsoft.com/azure/data-factory/iterative-development-debugging">Iterative development and debugging with Azure Data Factory</a>.</li>
<li>After a developer is satisfied with their changes, they create a pull request from their feature branch to the main or collaboration branch to get their changes reviewed by peers.</li>
<li>After a pull request is approved and changes are merged in the main branch, the changes get published to the development factory.</li>
<li>When the team is ready to deploy the changes to a test or UAT (User Acceptance Testing) factory, the team goes to their Azure Pipelines release and deploys the desired version of the development factory to UAT. This deployment takes place as part of an Azure Pipelines task and uses Resource Manager template parameters to apply the appropriate configuration.</li>
<li>After the changes have been verified in the test factory, deploy to the production factory by using the next task of the pipelines release.</li>
</ol>
<h2 id="best-practices-for-cicd">Best Practices for CI/CD</h2>
<p>If you&rsquo;re using Git integration with your data factory and have a CI/CD pipeline that moves your changes from development into test and then to production, we recommend these best practices:</p>
<ul>
<li><strong>Git integration</strong>: Configure only your development data factory with Git integration. Changes to test and production are deployed via CI/CD and don&rsquo;t need Git integration.</li>
<li><strong>Pre- and post-deployment script</strong>: Before the Resource Manager deployment step in CI/CD, you need to complete certain tasks, like stopping and restarting triggers and performing cleanup. We recommend that you use PowerShell scripts before and after the deployment task. For more information, see <a href="https://docs.microsoft.com/azure/data-factory/continuous-integration-delivery-automate-azure-pipelines#updating-active-triggers">Update active triggers</a>. The data factory team has <a href="https://github.com/Azure/Azure-DataFactory/blob/main/SamplesV2/ContinuousIntegrationAndDelivery/PrePostDeploymentScript.Ver2.ps1">provided a script</a> to use.</li>
<li><strong>Integration runtimes and sharing</strong>: Integration runtimes don&rsquo;t change often and are similar across all stages in your CI/CD. So Data Factory expects you to have the same name, type and sub-type of integration runtime across all stages of CI/CD. If you want to share integration runtimes across all stages, consider using a ternary factory just to contain the shared integration runtimes.</li>
<li><strong>Managed private endpoint deployment</strong>: If a private endpoint already exists in a factory and you try to deploy an ARM template that contains a private endpoint with the same name but with modified properties, the deployment will fail. You can override it by parameterizing that property and providing the respective value during deployment.</li>
<li><strong>Key Vault</strong>: When you use linked services whose connection information is stored in Azure Key Vault, it is recommended to keep separate key vaults for different environments and configure separate permission levels for each key vault.</li>
<li><strong>Resource naming</strong>: Due to ARM template constraints, issues in deployment may arise if your resources contain spaces in the name. The Azure Data Factory team recommends using &lsquo;_&rsquo; or &lsquo;-&rsquo; characters instead of spaces for resources.</li>
<li><strong>Altering repository</strong>: ADF manages GIT repository content automatically. Altering or adding manually unrelated files or folders into the ADF Git repository data folder could cause resource loading errors.</li>
<li><strong>Exposure control and feature flags</strong>: When working in a team, there are instances where you may merge changes, but don&rsquo;t want them to be run in elevated environments such as PROD and QA. The ADF team recommends using the DevOps concept of feature flags, where you can combine global parameters and the if condition activity to hide sets of logic based upon these environment flags.</li>
</ul>
<h2 id="unsupported-features">Unsupported Features</h2>
<ul>
<li>Data Factory doesn&rsquo;t allow cherry-picking of commits or selective publishing of resources. Publishes will include all changes made in the data factory.</li>
<li>The Azure Data Factory team doesn&rsquo;t recommend assigning Azure RBAC controls to individual entities (pipelines, datasets, etc.) in a data factory.</li>
<li>You can&rsquo;t publish from private branches, host projects on Bitbucket, or export and import alerts and matrices as parameters.</li>
<li>The &lsquo;PartialArmTemplates&rsquo; folder will no longer be published to the <em>adf_publish</em> branch starting 1-November 2021. Switch to any supported mechanism for deployments using: &lsquo;ARMTemplateForFactory.json&rsquo; or &lsquo;linkedTemplates&rsquo; files.</li>
</ul>
<h2 id="related-content">Related Content</h2>
<ul>
<li><a href="https://docs.microsoft.com/azure/data-factory/continuous-integration-delivery-improvements#continuous-deployment-improvements">Continuous deployment improvements</a></li>
<li><a href="https://docs.microsoft.com/azure/data-factory/continuous-integration-delivery-automate-azure-pipelines">Automate continuous integration using Azure Pipelines releases</a></li>
<li><a href="https://docs.microsoft.com/azure/data-factory/continuous-integration-delivery-manual-promotion">Manually promote a Resource Manager template to each environment</a></li>
<li><a href="https://docs.microsoft.com/azure/data-factory/continuous-integration-delivery-resource-manager-custom-parameters">Use custom parameters with a Resource Manager template</a></li>
<li><a href="https://docs.microsoft.com/azure/data-factory/continuous-integration-delivery-linked-templates">Linked Resource Manager templates</a></li>
<li><a href="https://docs.microsoft.com/azure/data-factory/continuous-integration-delivery-hotfix-environment">Using a hotfix production environment</a></li>
<li><a href="https://github.com/Azure/Azure-DataFactory/blob/main/SamplesV2/ContinuousIntegrationAndDelivery/PrePostDeploymentScript.Ver2.ps1">Sample pre- and post-deployment script</a></li>
</ul>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
