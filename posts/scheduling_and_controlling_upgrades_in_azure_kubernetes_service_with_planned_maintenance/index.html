<!doctype html>
<html lang="en-us">
  <head>
    <title>Scheduling and Controlling Upgrades in Azure Kubernetes Service with Planned Maintenance // mangoldai :: cloud architect insights :: Joshua Mangold</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.92.2" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="John Doe" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/mangoldaiwiki/css/main.min.d18c46a9c052e3fff4ff60ea22fff43c74140b8b952b4bbebd229127fbf997f3.css" />
    

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Scheduling and Controlling Upgrades in Azure Kubernetes Service with Planned Maintenance"/>
<meta name="twitter:description" content="Scheduling and Controlling Upgrades in Azure Kubernetes Service with Planned Maintenance Maintaining and upgrading your Azure Kubernetes Service (AKS) cluster can be a critical but complex task. Fortunately, AKS provides a powerful feature called Planned Maintenance that enables you to schedule and control cluster and node image upgrades. This article will guide you through the ins and outs of using Planned Maintenance to streamline your AKS cluster upgrades.
Understanding Planned Maintenance Your AKS cluster undergoes regular maintenance automatically, which can be divided into two types:"/>

    <meta property="og:title" content="Scheduling and Controlling Upgrades in Azure Kubernetes Service with Planned Maintenance" />
<meta property="og:description" content="Scheduling and Controlling Upgrades in Azure Kubernetes Service with Planned Maintenance Maintaining and upgrading your Azure Kubernetes Service (AKS) cluster can be a critical but complex task. Fortunately, AKS provides a powerful feature called Planned Maintenance that enables you to schedule and control cluster and node image upgrades. This article will guide you through the ins and outs of using Planned Maintenance to streamline your AKS cluster upgrades.
Understanding Planned Maintenance Your AKS cluster undergoes regular maintenance automatically, which can be divided into two types:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jmangold23.github.io/mangoldaiwiki/posts/scheduling_and_controlling_upgrades_in_azure_kubernetes_service_with_planned_maintenance/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-04-15T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-04-15T00:00:00+00:00" />



  </head>
  <body>
    <header class="app-header">
      <a href="https://jmangold23.github.io/mangoldaiwiki/"><img class="app-header-avatar" src="/mangoldaiwiki/avatar.jpg" alt="John Doe" /></a>
      <span class="app-header-title">mangoldai :: cloud architect insights :: Joshua Mangold</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/mangoldaiwiki/">Home</a>
             - 
          
          <a class="app-header-menu-item" href="/mangoldaiwiki/tags/">Tags</a>
      </nav>
      <p>Cloud architecture, Azure, and tech innovations. Notes, tips, and insights.</p>
      <div class="app-header-social">
        
          <a href="https://github.com/jmangold23" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>My Github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg>
          </a>
        
          <a href="https://www.linkedin.com/in/joshua-mangold-a7ba0989/" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-linkedin">
  <title>My LinkedIn</title>
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>
</svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Scheduling and Controlling Upgrades in Azure Kubernetes Service with Planned Maintenance</h1>
      <div class="post-meta">
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Apr 15, 2024
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          3 min read
        </div>
      </div>
    </header>
    <div class="post-content">
      <h1 id="scheduling-and-controlling-upgrades-in-azure-kubernetes-service-with-planned-maintenance">Scheduling and Controlling Upgrades in Azure Kubernetes Service with Planned Maintenance</h1>
<p>Maintaining and upgrading your Azure Kubernetes Service (AKS) cluster can be a critical but complex task. Fortunately, AKS provides a powerful feature called Planned Maintenance that enables you to schedule and control cluster and node image upgrades. This article will guide you through the ins and outs of using Planned Maintenance to streamline your AKS cluster upgrades.</p>
<h2 id="understanding-planned-maintenance">Understanding Planned Maintenance</h2>
<p>Your AKS cluster undergoes regular maintenance automatically, which can be divided into two types:</p>
<ol>
<li><strong>AKS-initiated Maintenance</strong>: This involves the weekly releases that AKS performs to keep your cluster up to date with the latest features and fixes.</li>
<li><strong>User-initiated Maintenance</strong>: This includes [cluster auto-upgrades][aks-upgrade] and [node operating system (OS) automatic security updates][node-image-auto-upgrade].</li>
</ol>
<p>The Planned Maintenance feature in AKS allows you to run both types of maintenance on a schedule of your choosing, helping minimize the impact on your workloads. With Planned Maintenance, you can specify when automatic upgrades should occur, though enabling or disabling Planned Maintenance itself does not enable or disable the automatic upgrades.</p>
<h2 id="configuring-planned-maintenance">Configuring Planned Maintenance</h2>
<p>Planned Maintenance in AKS offers three configuration types:</p>
<ol>
<li>
<p><strong>default</strong>: This is a basic configuration for controlling AKS weekly releases. These releases can take up to two weeks to roll out to all regions due to Azure&rsquo;s safe deployment practices. Use the <code>default</code> configuration to schedule these updates in a way that is least disruptive for your needs, and monitor the status of ongoing releases using the [weekly release tracker][release-tracker].</p>
</li>
<li>
<p><strong>aksManagedAutoUpgradeSchedule</strong>: This configuration controls when cluster upgrades scheduled by your auto-upgrade channel are performed. It allows for more granular control over the cadence and recurrence settings compared to the <code>default</code> configuration. For more information on cluster auto-upgrades, see [Automatically upgrade an Azure Kubernetes Service cluster][aks-upgrade].</p>
</li>
<li>
<p><strong>aksManagedNodeOSUpgradeSchedule</strong>: This configuration controls when node OS security patching scheduled by your node OS auto-upgrade channel is performed. Again, it offers more fine-grained control over the schedule than the <code>default</code> configuration. For details on node OS auto-upgrades, see [Automatically patch and update AKS cluster node images][node-image-auto-upgrade].</p>
</li>
</ol>
<p>We recommend using the <code>aksManagedAutoUpgradeSchedule</code> configuration for all cluster upgrade scenarios and the <code>aksManagedNodeOSUpgradeSchedule</code> configuration for all node OS security patching scenarios. The <code>default</code> configuration is intended solely for AKS weekly releases, and you can switch between it and the other two configurations using the <code>az aks maintenanceconfiguration update</code> command.</p>
<h2 id="creating-a-maintenance-window">Creating a Maintenance Window</h2>
<p>Planned Maintenance windows are specified in Coordinated Universal Time (UTC). The available schedule types for the <code>aksManagedAutoUpgradeSchedule</code> and <code>aksManagedNodeOSUpgradeSchedule</code> configurations are:</p>
<ul>
<li><code>Weekly</code>: Schedule maintenance to run on a specific day of the week, at a recurring interval.</li>
<li><code>AbsoluteMonthly</code>: Schedule maintenance to run on a specific day of the month, at a recurring interval.</li>
<li><code>RelativeMonthly</code>: Schedule maintenance to run on a specific day of the week, in a specific week of the month, at a recurring interval.</li>
</ul>
<p>For the <code>aksManagedNodeOSUpgradeSchedule</code> configuration, you can also use a <code>Daily</code> schedule to perform maintenance at a specific interval of days.</p>
<p>Here are some example maintenance window configurations:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#960050;background-color:#1e0010">Weekly</span> <span style="color:#960050;background-color:#1e0010">schedule</span>
<span style="color:#960050;background-color:#1e0010">&#34;schedule</span></code></pre></div>
    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
